x = [1 5 3 -1 -2 -3 1 -9];
%x = [1 1 1 1 1 1 1 1];


X_0 = fft(x);
subplot(2,1,1)
stem(abs(X_0))
hold on



N = length(x);
camadas = log2(N);

W = exp(j*2*pi*[0:(N/2)-1]/N);

% Vetor de índices
index = bi2de(de2bi(0:N-1,log2(N),'left-msb'))+1;
X_3 = x(index)

X_temp = zeros(1,N);
% w_index = zeros(camadas,N/2);
% 
% for w_i = 1:1:camadas
%     w_i
% end
% index = reshape(index,[2,N/2])
% X_temp = zeros(1,N);
% aux = 0;
% for c= 1:1:camadas
%    for etapa = 1:1:(N/2)
%        % X_temp(subetapa(1,2)) = X_3(subetapa(1,2))+
%        % [ index(1,etapa);index(2,etapa)]
%        %[camada subetapa]
%        % 0 1   2 3   4 5   6 7
%        % ---------------------
%        % 0 4 ; 2 6 ; 1 5 ; 3 7
%        % 0 0 ; 0 0 ; 0 0 ; 0 0
%        % ---------------------
%        % 0 2 ; 4 6 ; 1 3 ; 5 7
%        % 0 0 ; 2 2 ; 0 0 ; 2 2
%        % ---------------------
%        % 0 1 ; 4 5 ; 2 3 ; 6 7
%        % 0 0 ; 1 1 ; 2 2 ; 3 3
%    end
% end


% Camada 1
% 0 4 ; 2 6 ; 1 5 ; 3 7
% 0 4 ; 0 4 ; 0 4 ; 0 4 --> 0 0 ; 0 0 ; 0 0 ; 0 0 

X_temp(0+1) = X_3(0+1)+W(0+1).*X_3(1+1);
X_temp(4+1) = X_3(0+1)-W(0+1).*X_3(1+1);

X_temp(1+1) = X_3(2+1)+W(0+1).*X_3(3+1);
X_temp(5+1) = X_3(2+1)-W(0+1).*X_3(3+1);

X_temp(2+1) = X_3(4+1)+W(0+1).*X_3(5+1);
X_temp(6+1) = X_3(4+1)-W(0+1).*X_3(5+1);

X_temp(3+1) = X_3(6+1)+W(0+1).*X_3(7+1);
X_temp(7+1) = X_3(6+1)-W(0+1).*X_3(7+1);

X_3 = X_temp

% Camada 2
% 0 2 ; 4 6 ; 1 3 ; 5 7
% 0 4 ; 2 6 ; 0 4 ; 2 6 -->  0 0 ; 2 2 ; 0 0 ; 2 2

X_temp(0+1) = X_3(0+1)+W(0+1).*X_3(1+1);
X_temp(4+1) = X_3(0+1)-W(0+1).*X_3(1+1);

X_temp(1+1) = X_3(2+1)+W(0+1).*X_3(3+1);
X_temp(5+1) = X_3(2+1)-W(0+1).*X_3(3+1);

X_temp(2+1) = X_3(4+1)+W(2+1).*X_3(5+1);
X_temp(6+1) = X_3(4+1)-W(2+1).*X_3(5+1);

X_temp(3+1) = X_3(6+1)+W(2+1).*X_3(7+1);
X_temp(7+1) = X_3(6+1)-W(2+1).*X_3(7+1);


X_3 = X_temp

% Camada 3
% 0 1 ; 4 5 ; 2 3 ; 6 7
% 0 4 ; 1 5 ; 2 6 ; 3 7 -->  0 0 ; 1 1 ; 2 2 ; 3 3

X_temp(0+1) = X_3(0+1)+W(0+1).*X_3(1+1);
X_temp(4+1) = X_3(0+1)-W(0+1).*X_3(1+1);

X_temp(1+1) = X_3(2+1)+W(1+1).*X_3(3+1);
X_temp(5+1) = X_3(2+1)-W(1+1).*X_3(3+1);

X_temp(2+1) = X_3(4+1)+W(2+1).*X_3(5+1);
X_temp(6+1) = X_3(4+1)-W(2+1).*X_3(5+1);

X_temp(3+1) = X_3(6+1)+W(3+1).*X_3(7+1);
X_temp(7+1) = X_3(6+1)-W(3+1).*X_3(7+1);



X_3 = X_temp

subplot(2,1,2)
stem(abs(X_3))


%
%for c = 1:1:log2(N)
%    c
%end
%
hold off
